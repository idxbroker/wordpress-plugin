!function(){function e(){var e=jQuery("#idx_broker_apikey").val();return""===e?(jQuery("#idx_broker_apikey").focus(),jQuery("#idx_broker_apikey").parent("div").css("background","#FDB7B7"),jQuery("#idx_broker_apikey_error").show(),!1):(jQuery("#idx_broker_apikey").parents("div").css("background","none"),jQuery("#idx_broker_apikey_error").hide(),!0)}function r(e,r){var a=jQuery("#tabs li.active a").attr("href");return jQuery("#currentTab").val(a),e=e||jQuery("#idx_broker_options").serialize(),e+="&"+jQuery("#currentTab").serialize(),e+="&"+jQuery("[name=action]").serialize(),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){jQuery("[name=action]").val("update"),r()}})}jQuery(document).ready(function(){jQuery("#web_services_error").css("display","block");var a="<span class='ajax'></span>",i=jQuery("#blogUrl").attr("ajax");if(jQuery("#api_update").click(function(i){var _=jQuery("#idx_broker_apikey").val(),n=e();if(n===!0){i.preventDefault(),jQuery("[name=action]").val("idx_refresh_api"),jQuery("#action_mode").val("refresh_mode");var o=jQuery(".refresh_status"),t=jQuery("#idx_broker_apikey").serialize();o.fadeIn("fast").html(a+"Refreshing API..."),r(t,function(){o.fadeIn("fast").html(a+"Refreshing Links..."),setTimeout(window.location.reload(),1e3)})}}),""!==jQuery("#idx_broker_dynamic_wrapper_page_name").val()){var _=jQuery("#page_link").val().split("//"),n=_[0],o=_[1];jQuery("#protocol").text(n+"//"),jQuery("#page_link").val(o),jQuery("#dynamic_page_url").show()}jQuery("#idx_broker_create_wrapper_page").click(function(e){e.preventDefault();var r=jQuery("#idx_broker_dynamic_wrapper_page_name").val(),a=jQuery("#idx_broker_dynamic_wrapper_page_id").val();return jQuery("#idx_broker_dynamic_wrapper_page_name").removeClass("error"),jQuery("#dynamic_page > p.error").hide(),""===r?(jQuery("#idx_broker_dynamic_wrapper_page_name").addClass("error"),void jQuery("#dynamic_page > p.error").show()):void jQuery.post(ajaxurl,{action:"create_dynamic_page",post_title:r,wrapper_page_id:a,idx_broker_admin_page_tab:jQuery("#tabs li.active a").attr("href")}).done(function(e){setTimeout(window.location.reload(),1e3)})}),jQuery("#idx_broker_delete_wrapper_page").click(function(){var e=jQuery("#idx_broker_dynamic_wrapper_page_id").val();jQuery.post(ajaxurl,{action:"delete_dynamic_page",wrapper_page_id:e,idx_broker_admin_page_tab:jQuery("#tabs li.active a").attr("href")}).done(function(){var e=jQuery(".wrapper_status");e.fadeIn("fast").html(a+"Deleting IDX Wrapper Page..."),r("",function(){e.fadeIn("fast").html(a+" Refreshing Page..."),setTimeout(window.location.reload(),1e3)})})})})}(window,void 0);