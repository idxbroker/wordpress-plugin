!function(){function e(){var e=jQuery("#idx_broker_apikey").val();return""===e?(jQuery("#idx_broker_apikey").focus(),jQuery("#idx_broker_apikey").parent("div").css("background","#FDB7B7"),jQuery("#idx_broker_apikey_error").show(),!1):(jQuery("#idx_broker_apikey").parents("div").css("background","none"),jQuery("#idx_broker_apikey_error").hide(),!0)}function r(e,r){var i=jQuery("#tabs li.active a").attr("href");return jQuery("#currentTab").val(i),e=e||jQuery("#idx_broker_options").serialize(),e+="&"+jQuery("#currentTab").serialize(),e+="&"+jQuery("[name=action]").serialize(),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){jQuery("[name=action]").val("update"),r()}})}jQuery(document).ready(function(){jQuery("#web_services_error").css("display","block");var i="<span class='ajax'></span>",a=jQuery("#blogUrl").attr("ajax");if(jQuery("#save_changes").click(function(a){jQuery("#action_mode").val(""),a.preventDefault();var n=e();if(n===!0){var t=jQuery(".status");t.fadeIn("fast").html(i+"Saving Links...");var u,s;if(jQuery(".systemLink").size()>0||jQuery(".savedLink").size()>0){var u,s,o;jQuery(".systemLink").size()>0&&(jQuery("[name=action]").val("idx_update_systemlinks"),o=jQuery.param({idx_system_links:decodeURIComponent(jQuery("#idx_broker_options ul.linkList input:checked").serialize())}),o+="&"+jQuery.param({idx_system_links_names:decodeURIComponent(jQuery("#idx_broker_options ul.linkList input:checked").siblings("input").serialize())}),u=r(o,function(){t.fadeIn("slow").html(i+"Saving Options...")})),jQuery(".savedLink").size()>0&&(jQuery("[name=action]").val("idx_update_savedlinks"),o=jQuery.param({idx_saved_links:decodeURIComponent(jQuery("#idx_broker_options ul.savedLinklist input:checked").serialize())}),o+="&"+jQuery.param({idx_saved_links_names:decodeURIComponent(jQuery("#idx_broker_options ul.savedLinklist input:checked").siblings("input").serialize())}),s=r(o,function(){t.fadeIn("slow").html(i+"Saving Options...")})),jQuery.when.apply(jQuery,[u,s]).then(function(){window.location.reload()})}else t.fadeIn("slow").html(i+"Saving Options..."),jQuery("#idx_broker_options").submit()}}),jQuery("#tabs_container a").click(function(e){e.preventDefault();var r=jQuery(this).attr("href");jQuery("#tabs_content_container .tab_content").hide(),jQuery("#tabs_container li").removeClass("active"),jQuery("#tabs_container li:has(a[href="+r+"])").addClass("active"),jQuery(r).show()}),jQuery("#page_link").val().length<21?jQuery("#page_link").width(160):jQuery("#page_link").width(8*jQuery("#page_link").val().length),jQuery("#page_link").click(function(){jQuery("#page_link").select()}),jQuery("#idx_systemlink_group").click(function(e){jQuery(".idx_platinum_sl").attr("checked",jQuery(this).is(":checked"))}),jQuery("#idx_savedlink_group").click(function(e){jQuery(".idx_platinum_sdl").attr("checked",jQuery(this).is(":checked"))}),jQuery("#api_update").click(function(a){var n=jQuery("#idx_broker_apikey").val(),t=e();if(t===!0){a.preventDefault(),jQuery("[name=action]").val("idx_refresh_api"),jQuery("#action_mode").val("refresh_mode");var u=jQuery(".refresh_status"),s=jQuery("#idx_broker_apikey").serialize();u.fadeIn("fast").html(i+"Refreshing API..."),r(s,function(){u.fadeIn("fast").html(i+"Refreshing Links..."),setTimeout(window.location.reload(),1e3)}),jQuery.post(ajaxurl,{action:"get_locations"})}}),""!==jQuery("#idx_broker_dynamic_wrapper_page_name").val()){var n=jQuery("#page_link").val().split("//"),t=n[0],u=n[1];jQuery("#protocol").text(t+"//"),jQuery("#page_link").val(u),jQuery("#dynamic_page_url").show()}jQuery("#idx_broker_creaet_wrapper_page").click(function(e){e.preventDefault();var r=jQuery("#idx_broker_dynamic_wrapper_page_name").val(),i=jQuery("#idx_broker_dynamic_wrapper_page_id").val();return jQuery("#idx_broker_dynamic_wrapper_page_name").removeClass("error"),jQuery("#dynamic_page > p.error").hide(),""===r?(jQuery("#idx_broker_dynamic_wrapper_page_name").addClass("error"),void jQuery("#dynamic_page > p.error").show()):void jQuery.post(ajaxurl,{action:"create_dynamic_page",post_title:r,wrapper_page_id:i,idx_broker_admin_page_tab:jQuery("#tabs li.active a").attr("href")}).done(function(e){setTimeout(window.location.reload(),1e3)})}),jQuery("#idx_broker_delete_wrapper_page").click(function(){var e=jQuery("#idx_broker_dynamic_wrapper_page_id").val();jQuery.post(ajaxurl,{action:"delete_dynamic_page",wrapper_page_id:e,idx_broker_admin_page_tab:jQuery("#tabs li.active a").attr("href")}).done(function(){var e=jQuery(".wrapper_status");e.fadeIn("fast").html(i+"Deleting IDX Wrapper Page..."),r("",function(){e.fadeIn("fast").html(i+" Refreshing Page..."),setTimeout(window.location.reload(),1e3)})})}),jQuery("input.systemLink").on("click",systemlink_check),jQuery("input.savedLink").on("click",savedlink_check),jQuery("a[href="+jQuery("#currentTab").val()+"]").click(),systemlink_check(),savedlink_check()}),window.systemlink_check=function(){jQuery(".systemLink").size()==jQuery(".systemLink:checked").size()?jQuery("input[name=idx_systemlink_group]").attr("checked",!0):jQuery("input[name=idx_systemlink_group]").attr("checked",!1)},window.savedlink_check=function(){jQuery(".savedLink").size()==jQuery(".savedLink:checked").size()?jQuery("input[name=idx_savedlink_group]").attr("checked",!0):jQuery("input[name=idx_savedlink_group]").attr("checked",!1)}}(window,void 0);