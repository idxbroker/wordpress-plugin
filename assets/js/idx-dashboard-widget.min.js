window.addEventListener("load",function(){function e(){var e=c.checked;return e===!0?"month":"day"}function t(){p.style.display="block",document.querySelector("#idx_dashboard_widget .week-day-label").innerHTML="Day",m.style.display="none",g.style.display="block",g.style.opacity=0,jQuery.post(ajaxurl,{action:"idx_dashboard_leads",timeframe:e(),nonce:idxDashboardNonces.leadsNonce}).done(function(e){if("No Leads Returned"===e)return p.style.display="none",g.style.opacity=1,g.innerHTML=e;var t=google.visualization.arrayToDataTable(JSON.parse(e)),a={title:"Lead Statistics",hAxis:{title:"Date",titleTextStyle:{color:"#333"}},vAxis:{minValue:0,maxValue:4,format:"#"},legend:{position:"in"},axisTitlesPosition:"out",theme:"maximized",animation:{startup:!0,duration:500}},i=new google.visualization.AreaChart(document.querySelector(".leads-overview"));return i.draw(t,a),g.style.display="block",g.style.opacity=1,p.style.display="none"})}function a(){p.style.display="block",document.querySelector("#idx_dashboard_widget .week-day-label").innerHTML="Week",g.style.display="none",m.style.display="block",m.style.opacity=0,jQuery.post(ajaxurl,{action:"idx_dashboard_listings",timeframe:e(),nonce:idxDashboardNonces.listingsNonce}).done(function(e){if("No Listings Returned"===e)return p.style.display="none",m.style.opacity=1,document.querySelector(".listings-overview").innerHTML=e;var t=google.visualization.arrayToDataTable(JSON.parse(e)),a={title:"Listing Statistics",pieHole:.4,animation:{startup:!0,duration:500}},i=new google.visualization.PieChart(document.querySelector(".listings-overview"));return i.draw(t,a),m.style.display="block",m.style.opacity=1,p.style.display="none"})}function i(){google.charts.setOnLoadCallback(t)}function o(){google.charts.setOnLoadCallback(a)}function n(){google.charts.load("current",{packages:["corechart"]}),l(),i()}function d(e){e.preventDefault(),y.classList.remove("button-primary"),y.disabled=!0,u.disabled=!1,u.classList.add("button-primary"),o()}function s(e){e.preventDefault(),u.classList.remove("button-primary"),u.disabled=!0,y.disabled=!1,y.classList.add("button-primary"),i()}function r(){u.disabled===!0?i():o()}function l(){c.addEventListener("change",r),y.addEventListener("click",d),u.addEventListener("click",s)}var c=document.querySelector("#idx_dashboard_widget #timeframeswitch"),u=document.querySelector("#idx_dashboard_widget .leads"),y=document.querySelector("#idx_dashboard_widget .listings"),p=document.querySelector(".idx-loader"),g=document.querySelector("#idx_dashboard_widget .leads-overview"),m=document.querySelector("#idx_dashboard_widget .listings-overview");jQuery.ajax({url:ajaxurl,data:{action:"side_overview_data",nonce:idxDashboardNonces.overviewNonce}}).done(function(e){var t=JSON.parse(e).data;document.querySelector(".new-leads ul").innerHTML=t.leads,document.querySelector(".popular-listings ul").innerHTML=t.listings}),n()});