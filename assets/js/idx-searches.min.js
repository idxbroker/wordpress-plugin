jQuery(document).ready(function(e){e(".mdl-data-table.searches").DataTable({pagingType:"full_numbers",bSort:!0,bPaginate:!0,iDisplayLength:10,order:[[1,"desc"]],columnDefs:[{targets:[0,1,2,3],className:"mdl-data-table__cell--non-numeric"},{targets:[3],orderable:!1}],dom:'<"table-filter"f>rt<"lead-table-controls mdl-shadow--2dp"lip>',oLanguage:{sSearch:""},sScrollX:"100%",sScrollXInner:"98%"}),e(".dataTables_length").addClass("mdl-selectfield"),e(".dataTables_length select").addClass("mdl-selectfield__select"),e(".dataTables_filter input").attr({placeholder:"Search"}),e("#add-search").submit(function(a){a.preventDefault();var s=e("#ccz").select2().find(":selected").data("ccz"),t=e("#ccz").select2().val(),r=e("#pt").val(),d=e("#lp").val(),l=e("#hp").val(),c=e("#bd").val(),i=e("#ba").val(),n=e("#sqft").val(),o=e("#acres").val(),u=e("#add").val(),p=e("#pageTitle").val();if(""===p)return e("#pageTitle").parent().addClass("is-dirty"),e("#pageTitle").focus(),e("#add-search .error-incomplete").show(),!1;var h=e("#linkTitle").val();if(""===h)return e("#linkTitle").parent().addClass("is-dirty"),e("#linkTitle").focus(),e("#add-search .error-incomplete").show(),!1;e("#add-search .error-existing").hide(),e("#add-search .error-fail").hide(),e("button.add-search").hide(),e(".mdl-spinner").addClass("is-active");var v=e("#descriptionMeta").val(),f=e("#keywords").val(),m=e("#linkCopy").val(),b=e("#agentID").val();e("#useDescriptionMeta").parent().hasClass("is-checked")?useDescriptionMeta="y":useDescriptionMeta="n",e("#useKeywordsMeta").parent().hasClass("is-checked")?useKeywordsMeta="y":useKeywordsMeta="n",e("#featured").parent().hasClass("is-checked")?featured="y":featured="n";var y=e("button.add-search").data("nonce"),g=IDXSearchAjax.searchesurl;return e.ajax({type:"post",url:IDXSearchAjax.ajaxurl,data:{action:"idx_search_add",pt:r,ccz:s,locations:t,lp:d,hp:l,bd:c,ba:i,sqft:n,acres:o,add:u,pageTitle:p,linkTitle:h,useDescriptionMeta:useDescriptionMeta,descriptionMeta:v,useKeywordsMeta:useKeywordsMeta,keywords:f,featured:featured,linkCopy:m,agentID:b,nonce:y},success:function(a){e.isNumeric(a)?window.location.href=g:(e("#add-search .error-fail").show(),e("button.add-search").show(),e(".mdl-spinner").removeClass("is-active"))}}),!1}),e("#add-lead-search").submit(function(a){a.preventDefault();var s=e("#ccz").select2().find(":selected").data("ccz"),t=e("#ccz").select2().val(),r=e("#pt").val(),d=e("#lp").val(),l=e("#hp").val(),c=e("#bd").val(),i=e("#ba").val(),n=e("#sqft").val(),o=e("#acres").val(),u=e("#add").val();e("#add-lead-search .error-existing").hide(),e("#add-lead-search .error-fail").hide(),e("button.add-lead-search").hide(),e(".mdl-spinner").addClass("is-active"),v=e("#receiveUpdates").parent().hasClass("is-checked")?"y":"n";var p=e("#leadID").val(),h=e("#searchName").val(),v=e("#receiveUpdates").val(),f=e("button.add-lead-search").data("nonce"),m=IDXSearchAjax.leadurl;return e.ajax({type:"post",url:IDXSearchAjax.ajaxurl,data:{action:"idx_lead_search_add",pt:r,ccz:s,locations:t,lp:d,hp:l,bd:c,ba:i,sqft:n,acres:o,add:u,searchName:h,receiveUpdates:v,leadID:p,nonce:f},success:function(a){e.isNumeric(a)?(window.location.href=m+p+"#lead-searches",e("#lead-searches").delay(1e3).addClass("is-active")):(e("#add-search .error-fail").show(),e("button.add-search").show(),e(".mdl-spinner").removeClass("is-active"))}}),!1}),e(document).on("click",".delete-search",function(){var a=document.getElementById("dialog-search-delete");dialogPolyfill.registerDialog(a),a.showModal();var s=e(this).data("ssid"),t=e(this).data("nonce"),r=e(this).parents(".search-row:first");return a.addEventListener("close",function(d){"yes"==a.returnValue&&(e(".mdl-spinner").addClass("is-active"),e.ajax({type:"post",url:IDXSearchAjax.ajaxurl,data:{action:"idx_search_delete",nonce:t,ssid:s},success:function(e){"success"==e&&r.fadeOut(function(){r.remove()})}}),e(".mdl-spinner").removeClass("is-active"))}),!1}),e("#ccz").select2({placeholder:"Enter City, County, or Postal Code"}),e("#ccz").on("select2:select",function(){selectedOptGroup=e("#ccz").select2().find(":selected").parent("optgroup"),otherOptGroups=e("#ccz").find("optgroup").not(selectedOptGroup),e(otherOptGroups).find("option").prop("disabled",!0)})});